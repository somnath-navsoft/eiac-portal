<div class="main-detail">
    <div class="container-fluid p-0">
        <div class="main-dashboard">
            <div class="row io_details">
                <div class="col-md-3">
                    <div class="dsh-wrapper">
                        <div class="trainer-main-details">
                            <div class="user-icons">
                                <span class="icon-user-dash"></span>
                            </div>
                            <div class="trainer-data-det">
                                <div class="trainer-pro">
                                    <span>CAB</span>
                                </div>
                                <div class="trainer-maindata trainer-update">
                                    <span>144</span>
                                </div>
                            </div>
                        </div>
                        <div class="date-update">
                            <div class="data-bg">
                                <h6><span class="icon-arrow-up"></span>22 New since last month</h6>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="dsh-wrapper">
                        <div class="trainer-main-details trainer2">
                            <div class="user-icons">
                                <span class="icon-doc-write"></span>
                            </div>
                            <div class="trainer-data-det">
                                <div class="trainer-pro">
                                    <span>Certificates</span>
                                </div>
                                <div class="trainer-maindata trainer-update">
                                    <span>324</span>
                                </div>
                            </div>
                        </div>
                        <div class="date-update update2">
                            <div class="data-bg">
                                <h6><span class="icon-arrow-up"></span>22 New since last month</h6>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="dsh-wrapper">
                        <div class="trainer-main-details trainer3">
                            <div class="user-icons">
                                <span class="icon-doc-diff"></span>
                            </div>
                            <div class="trainer-data-det">
                                <div class="trainer-pro">
                                    <span>Documents</span>
                                </div>
                                <div class="trainer-maindata trainer-update">
                                    <span>542</span>
                                </div>
                            </div>
                        </div>
                        <div class="date-update update3">
                            <div class="data-bg">
                                <h6><span class="icon-arrow-down"></span>22 Expiring since last month</h6>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="dsh-wrapper">
                        <div class="trainer-main-details trainer4">
                            <div class="user-icons">
                                <span class="icon-calendar"></span>
                            </div>
                            <div class="trainer-data-det">
                                <div class="trainer-pro">
                                    <span>Training Events</span>
                                </div>
                                <div class="trainer-maindata trainer-update">
                                    <span>324</span>
                                </div>
                            </div>
                        </div>
                        <div class="date-update update4">
                            <div class="data-bg">
                                <h6><span class="icon-arrow-down"></span>22 Completed this year</h6>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="service-links dash_menu_main">
            <div class="row m-0">
                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="trainer_head">
                                <h4>Department View</h4>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="dash-main">
                                <div class="dash-wrap">
                                    <div class="usermain">
                                        <div class="main-status">
                                            <p class="head-dash">CAB</p>
                                            <p class="sub-head-dash">IB</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="dash-logo">
                                    <span class="icon-user-dash"></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="dash-main">
                                <div class="dash-wrap">
                                    <div class="usermain">
                                        <div class="main-status">
                                            <p class="head-dash">Scheme</p>
                                            <p class="sub-head-dash">21</p>
                                        </div>
                                        <div class="view-all sub-head-dash">
                                            <p><span class="active-dash">Active</span></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="dash-logo">
                                    <span class="icon-doc-fold"></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="dash-main">
                                <div class="dash-wrap">
                                    <div class="usermain">
                                        <div class="main-status">
                                            <p class="head-dash">Documents</p>
                                            <p class="sub-head-dash">04</p>
                                        </div>
                                        <div class="view-all sub-head-dash">
                                            <p><span class="active-dash confirmed-dash">Refference</span></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="dash-logo">
                                    <span class="icon-doc-diff"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="dash-main">
                                <div class="dash-wrap">
                                    <div class="usermain">
                                        <div class="main-status">
                                            <p class="head-dash">CAB Approvals</p>
                                            <p class="sub-head-dash">02</p>
                                        </div>
                                        <div class="view-all sub-head-dash">
                                            <p><span class="active-dash waiting-dash">Waiting</span></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="dash-logo">
                                    <span class="icon-check-mark"></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="dash-main">
                                <div class="dash-wrap">
                                    <div class="usermain">
                                        <div class="main-status">
                                            <p class="head-dash">Service Enquiries</p>
                                            <p class="sub-head-dash">29</p>
                                        </div>
                                        <div class="view-all">
                                            <p><span class="icon-arrow-up"></span>12 New</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="dash-logo">
                                    <span class="icon-check-mark"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="trainer_head">
                                <h4>Certificate View</h4>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="dash-main">
                                <div class="dash-wrap">
                                    <div class="usermain">
                                        <div class="main-status">
                                            <p class="head-dash head-dash-bill">IB Certificates</p>
                                            <p class="sub-head-dash">345</p>
                                        </div>
                                        <div class="view-all">
                                            <p><span class="icon-arrow-up"></span>12 New</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="dash-logo bill-logo">
                                    <span class="icon-doc-write"></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="dash-main">
                                <div class="dash-wrap">
                                    <div class="usermain">
                                        <div class="main-status">
                                            <p class="head-dash head-dash-bill">In Progress</p>
                                            <p class="sub-head-dash">11</p>
                                        </div>
                                        <div class="view-all">
                                            <p>From last week</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="dash-logo bill-logo">
                                    <span class="icon-refresh"></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="dash-main">
                                <div class="dash-wrap">
                                    <div class="usermain">
                                        <div class="main-status long_content">
                                            <p class="head-dash head-dash-bill">Status</p>
                                            <p class="sub-head-dash">50 <span>Accredited</span></p>
                                            <p class="sub-head-dash">11 <span>Withdrawn</span></p>
                                            <p class="sub-head-dash">04 <span>Suspended</span></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="dash-logo bill-logo">
                                    <span class="icon-menu"></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="dash-main">
                                <div class="dash-wrap">
                                    <div class="usermain">
                                        <div class="main-status">
                                            <p class="head-dash head-dash-bill">Region</p>
                                            <p class="sub-head-dash">India</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="dash-logo bill-logo">
                                    <span class="icon-world"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="dashboard-events">
            <div class="row m-0">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="tra_events">
                                <div class="trainer_head">
                                    <h4>Recent Updates</h4>
                                </div>
                                <div class="add-data">
                                    <a href="javascript:void(0)"><span class="icon-close"></span></a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="event_timings client_timings">
                                <div class="date-cnt">
                                    <span>20/01/2020</span>
                                </div>
                                <div class="activity-details">
                                    <ul>
                                        <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
                                            tempor incididunt ut labore et dolore magna aliqua.
                                            Ut enim ad minim veniam, quis nostrud exercitation.<span>05:25 PM</span>
                                        </li>
                                        <li>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore
                                            eu fugiat nulla pariatur.<span>05:21 PM</span></li>
                                        <li>On the other hand, we denounce with righteous indignation and dislike men
                                            who are so beguiled and demoralized by the charms
                                            of pleasure of the moment.<span>05:25 PM</span></li>
                                        <li>These cases are perfectly simple and easy to distinguish. In a free hour,
                                            when our power of choice is untrammelled and when
                                            nothing prevents.<span>05:21 PM</span></li>
                                        <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
                                            tempor incididunt ut labore et dolore magna aliqua.
                                            Ut enim ad minim veniam, quis nostrud exercitation.<span>05:25 PM</span>
                                        </li>
                                        <li>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore
                                            eu fugiat nulla pariatur.<span>05:21 PM</span></li>
                                    </ul>
                                </div>
                                <div class="date-cnt">
                                    <span>19/01/2020</span>
                                </div>
                                <div class="activity-details">
                                    <ul>
                                        <li>On the other hand, we denounce with righteous indignation and dislike men
                                            who are so beguiled and demoralized
                                            by the charms of pleasure of the moment.<span>05:25 PM</span></li>
                                        <li>These cases are perfectly simple and easy to distinguish. In a free hour,
                                            when our power of choice is
                                            untrammelled and when nothing prevents.<span>05:21 PM</span></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="comments-section">
            <div class="row m-0">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="tra_events">
                                <div class="trainer_head">
                                    <h4>Communication</h4>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="ass-name-det" *ngFor="let row of messageList | paginate: config; let i = index;">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="ass-data">
                                    <h3>{{row.title}}</h3>
                                    <div class="date_wrapper">
                                        <p>{{row.created | date}}</p>
                                        <div class="reply_msg" (click)="getUserDetails(row.user)"
                                            *ngIf="row.meta_title != 'user_registration'"
                                            routerLink="/dashboard/message-reply/{{row.id}}">
                                            <span class="icon-chat"></span>
                                            Reply
                                        </div>
                                    </div>
                                </div>
                                <hr>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="assess-doc" *ngIf="row.meta_title == 'user_registration'">
                                    <div class="data-attach">
                                        <h5>{{row.message}}</h5>
                                    </div>
                                    <div class="bttn-details">
                                        <a *ngIf="row.user.users_type=='cab_client'" class="cancel-bttn"
                                            (click)="getRouteId(row.user.id)"
                                            routerLink="/dashboard/cab_client/message-detail/{{row.user.id}}">DETAILS</a>

                                        <a *ngIf="row.user.users_type=='assessors'" class="cancel-bttn"
                                            (click)="getRouteId(row.user.id)"
                                            routerLink="/dashboard/assessors/message-detail/{{row.user.id}}">DETAILS</a>

                                        <a *ngIf="row.user.users_type=='trainers'" class="cancel-bttn"
                                            (click)="getRouteId(row.user.id)"
                                            routerLink="/dashboard/trainers/message-detail/{{row.user.id}}">DETAILS</a>

                                        <a *ngIf="row.user.users_type=='candidate'" class="cancel-bttn"
                                            (click)="getRouteId(row.user.id)"
                                            routerLink="/dashboard/candidate/message-detail/{{row.user.id}}">DETAILS</a>

                                        <a *ngIf="row.user.users_type=='operations'" class="cancel-bttn"
                                            (click)="getRouteId(row.user.id)"
                                            routerLink="/dashboard/operations/message-detail/{{row.user.id}}">DETAILS</a>
                                    </div>
                                </div>

                                <div class="ass-details" *ngIf="row.meta_title != 'user_registration'">
                                    <p>{{row.message}}</p>
                                    <div class="attach-cnt" *ngIf="row.document!=null">
                                        <a href="{{constant.mediaPath+row.document}}" target="_blank"
                                            class="attachment-cnt"><span class="icon-attach"></span>{{ getFileName(row.document)}}</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>                    
                    <pagination-controls (pageChange)="pageChanged($event)"></pagination-controls>
                    <div class="row" *ngIf="userType=='operations'">
                        <div class="col-md-12">
                            <div class="cmnt-content">
                                <form #ngForm="ngForm" (ngSubmit)="onOperationSubmit(ngForm)">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <mat-form-field  class="cab-data">
                                                <mat-label>Select</mat-label>
                                                <mat-select required [(ngModel)]="selectedField"
                                                    [ngModelOptions]="{standalone: true}"
                                                    (ngModelChange)="setField($event)">
                                                    <mat-option *ngFor="let data of select_field" [value]="data.value">
                                                        {{data.field}}</mat-option>
                                                </mat-select>
                                                <mat-error></mat-error>
                                            </mat-form-field>
                                        </div>

                                        <div class="col-md-6"
                                            *ngIf="getUserType=='cab_client' || getUserType=='cab_code'">
                                            <mat-form-field class="cab-data">
                                                <!-- <input type="text" (click)="search($event.target.value)"
                                                    (input)="search($event.target.value)"
                                                    placeholder="{{selectedField}}" matInput required
                                                    [matAutocomplete]="auto">
                                                <mat-autocomplete #auto="matAutocomplete">
                                                    <mat-option (onSelectionChange)="getValue(option.id)"
                                                        *ngFor="let option of selectSearch" [value]="option.username">
                                                        {{option.username}}
                                                    </mat-option>
                                                </mat-autocomplete> -->
                                                <mat-chip-list #chipList >
                                                    <mat-chip
                                                      *ngFor="let option of selectedUser"
                                                      [selectable]="selectable"
                                                      [removable]="removable"
                                                      (removed)="remove(option)">
                                                      {{option}}
                                                      <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                                                    </mat-chip>
                                                    <input 
                                                      placeholder="{{selectedField}}"
                                                      #fruitInput                                                      
                                                      [matAutocomplete]="auto"
                                                      [matChipInputFor]="chipList"                                                      
                                                      [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                                      (matChipInputTokenEnd)="add($event)" (input)="search($event.target.value)">
                                                  </mat-chip-list>
                                                  <mat-autocomplete #auto="matAutocomplete">
                                                    <mat-option (onSelectionChange)="getValue(option, 'username')"
                                                        *ngFor="let option of selectSearch" [value]="option.username">
                                                        {{option.username}}
                                                    </mat-option>
                                                </mat-autocomplete>
                                            </mat-form-field>
                                        </div>
                                        <div class="col-md-6"
                                            *ngIf="getUserType=='candidate' || getUserType=='trainers' || getUserType=='assessors' || getUserType=='super_admin'">
                                            <mat-form-field class="cab-data" #matForm>
                                                <!-- <input type="text" (click)="search($event.target.value)"
                                                    (input)="search($event.target.value)"
                                                    placeholder="{{selectedField}}" matInput required
                                                    [matAutocomplete]="auto"> -->
                                                    <mat-chip-list #chipList >
                                                        <mat-chip
                                                          *ngFor="let option of selectedUser"
                                                          [selectable]="selectable"
                                                          [removable]="removable"
                                                          (removed)="remove(option)">
                                                          {{option}}
                                                          <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                                                        </mat-chip>
                                                        <input 
                                                          placeholder="{{selectedField}}"
                                                          #fruitInput                                                      
                                                          [matAutocomplete]="auto"
                                                          [matChipInputFor]="chipList"
                                                          [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                                          (matChipInputTokenEnd)="add($event)" (input)="search($event.target.value)">
                                                      </mat-chip-list>
                                                <mat-autocomplete #auto="matAutocomplete" >
                                                    <mat-option (onSelectionChange)="getValue(option, 'email')"
                                                        *ngFor="let option of selectSearch" [value]="option.email">
                                                        {{option.email}}
                                                    </mat-option>
                                                </mat-autocomplete>
                                            </mat-form-field>
                                        </div>

                                        <div class="col-md-3">
                                            <div class="matupload position-relative">
                                                <mat-form-field class="lng-data">
                                                    <input readonly name="upload_message" [(ngModel)]="documentName"
                                                        matInput name="file" placeholder="Upload Document">
                                                </mat-form-field>
                                                <span class="fileupload">
                                                    <input #file type="file" accept="application/pdf"
                                                        name="upload_message_file"
                                                        [(ngModel)]="chatMessage.upload_message_file"
                                                        (change)="validateFile($event)">
                                                    <!-- <mat-error class="error" *ngIf="!file_validation">Please Upload a valid file (ex: pdf,xlsx,xlx)</mat-error>  -->
                                                    <span class="icon-attach attach-data" (click)="file.click()"></span>
                                                </span>
                                                <p class="error" *ngIf="!file_validation">Please Upload a
                                                    valid file (ex: pdf)</p>
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            <mat-form-field class="cab-data">
                                                <mat-label>Message</mat-label>
                                                <input name="message" maxlength="200" required [(ngModel)]="chatMessage.message"
                                                    matInput autocomplete="off" placeholder="Message">
                                                <mat-error></mat-error>
                                            </mat-form-field>
                                        </div>

                                    </div>
                                    <div class="row mt-4">
                                        <div class="col-md-12">
                                            <div class="bttns-appln mb-0">
                                                <button class="submit-bttn" [disabled]="button_disable">SEND
                                                    MESSAGE</button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>